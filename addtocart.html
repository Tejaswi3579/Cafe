<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Coffee Shop</title>
    <link rel="stylesheet" href="addtocart.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.21.1/axios.min.js"></script>
    <script src="https://kit.fontawesome.com/a076d05399.js" crossorigin="anonymous"></script>
</head>
<body>
   <div class="header">
    <p class="logo">Coffee Shop</p>
    <div class="cart" id="cart-btn" onclick="toggleCart()">
        <p id="count" class="count">0 Cart</p>
    </div>
    <div style="position: fixed; top: 10px; right: 20px; color: white; background-color: rgba(0, 0, 0, 0.5); padding: 5px; border-radius: 5px;">
        Welcome, <span id="username-display">{{username}}</span>! 
        <a href="retrieve.html" style="margin-left: 10px; color: white; text-decoration: none; font-weight: bold;">Your Oders</a>
    </div>
</div>


<div id="root" class="product-container"></div>


    <div class="sidebar" id="sidebar">
        <div class="sidebar-header">
            <h2>My Cart</h2>
            <button onclick="toggleCart()" class="close-btn">X</button>
        </div>
        <div id="cartItem">Your cart is empty</div>
        <div class="foot">
            <h3>Total:</h3>
            <h2 id="total">$0.00</h2>
            <button onclick="buyNow()">Buy Now</button>
        </div>
    </div>

    <script src="addtocart.js"></script>
    <script>
        fetch('/getUsername')
        .then(response => response.json())  // Get the response from server
        .then(data => {
            if (data.username) {
                // If the username exists in the session, display it in the element
                document.getElementById("username-display").innerText = data.username;
            } else {
                // If no username found, redirect the user to the login page
                window.location.href = '/';  // Redirect to login page if no username
            }
        })
        .catch(error => {
            console.error("Error fetching username:", error);  // Log any errors that happen
        });

        
    </script>
    

</body>
</html>